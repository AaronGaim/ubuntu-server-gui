<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">// Generated by CoffeeScript 1.3.3
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {
<span id='ServerOverview'>  /**
</span>   * @class ServerOverview
   * Server cpu and memory utilization data.
   * @extends Backbone.Model
  */

  var ServerOverview;
  ServerOverview = (function(_super) {

    __extends(ServerOverview, _super);

<span id='ServerOverview-method-constructor'><span id='ServerOverview'>    /**
</span></span>     * @constructor
     * Creates a new ServerOverview model.
     * @param {Object} [options] config options for Backbone.Model
    */


    function ServerOverview(options) {
      options.defaults = {
        'cpu': null,
        'memory': null
      };
      this.fetchOptions = {
        url: 'http://10.0.1.6:3000/cpumem'
      };
      this.fetch(this.fetchOptions);
      /*
                  setInterval(function() {
                      me.fetch(me.fetchOptions);
                  }, 5000);
      */

      ServerOverview.__super__.constructor.apply(this, arguments);
    }

<span id='ServerOverview-method-parse'>    /**
</span>     * @method @private
     * Formats data returned from the server after fetch is called.
     * @param {Object} stats JSON data from the server
     * @param {Object} [jqXHR] jQuery jqXHR
     * @return {Object} re-formmated JSON data
    */


    ServerOverview.prototype.parse = function(stats, xhr) {
      var totalCpulUtilization, totalMemUtilization;
      totalCpulUtilization = 0;
      stats.cpus.forEach(function(item, index, allItems) {
        return totalCpulUtilization = +item.utilization;
      });
      /*
                  totalCpulUtilization = 0
                  for item in stats.cpus
                      do (item) -&gt;
                      totalCpulUtilization =+ item.utilization
      */

      if (totalCpulUtilization &gt; 1) {
        totalCpulUtilization = Math.round(totalCpulUtilization);
      } else {
        totalCpulUtilization = String(totalCpulUtilization).slice(1);
      }
      totalMemUtilization = 0;
      if (stats.mem.utilization &gt; 1) {
        totalMemUtilization = Math.round(stats.mem.utilization);
      } else {
        totalMemUtilization = String(totalMemUtilization).slice(1);
      }
      return {
        cpu: totalCpulUtilization,
        memory: totalMemUtilization
      };
    };

    return ServerOverview;

  })(Backbone.Model);
  return ServerOverview;
});
</pre>
</body>
</html>
