// Generated by CoffeeScript 1.3.3
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(['jquery', 'underscore', 'backbone_marionette', 'app', 'text!view/modal/tpl/remove-server.html', 'bootstrap_modal', 'bootstrap_transition'], function($, _, BackboneMarionette, App, removeServerTpl) {
  /**
   * @class RemoveServerModal
   * Add server modal dialog.
   * @extends BackboneMarionette.ItemView
  */

  var RemoveServerModal;
  return RemoveServerModal = (function(_super) {

    __extends(RemoveServerModal, _super);

    /**
     * @constructor
     * Creates a new RemoveServerModal instance.
     * @param {Object} [options] config options for BackboneMarionette.ItemView.
    */


    function RemoveServerModal(options) {
      if (options == null) {
        options = {};
      }
      if (options.server == null) {
        throw new Error('server must be provided');
      }
      this.App = App;
      this.model = options.model;
      this.template = _.template(removeServerTpl);
      this.tagName = 'div';
      this.id = 'modal_remove_server';
      this.className = 'modal hide fade';
      this.events = {
        'click #remove_server_btn': 'onConfirmation'
      };
      RemoveServerModal.__super__.constructor.apply(this, arguments);
      return;
    }

    RemoveServerModal.prototype.hideModal = function() {
      $('#modal_remove_server').modal('hide');
    };

    RemoveServerModal.prototype.onConfirmation = function(eventObj) {
      eventObj.stopPropagation();
      eventObj.preventDefault();
      eventObj.returnValue = false;
      this.model.destroy();
      this.hideModal();
    };

    RemoveServerModal.prototype.onShow = function() {
      var _this = this;
      $('#modal_remove_server').modal({
        show: true
      }).on('hidden', function() {
        _this.close();
      }).on('shown', function() {});
    };

    return RemoveServerModal;

  })(BackboneMarionette.ItemView);
});
